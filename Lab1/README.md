# Lab1

Проект демонстрирует работу с **процессами в Windows** и обмен данными через **двоичный файл**.
Сборка создаёт три исполняемых файла:

- **Main.exe** — управляющее приложение (запускает дочерние процессы).
- **Creator.exe** — вводит данные о сотрудниках и записывает их в бинарный файл.
- **Reporter.exe** — читает бинарный файл и формирует текстовый отчёт с расчётом зарплаты.

Программа протестирована с помощью **GoogleTest**.

---
### Инструкции по сборке

1. Создайте папку `build` и перейдите в неё:

```bash
mkdir build
cd build
```

2. Настройте CMake:

```bash
cmake ..
```

3. Соберите проект:

```bash
cmake --build .
```

> **Требования:** CMake ≥ 3.15, компилятор с поддержкой C++20.

## Запуск приложения

```bat
.\Debug\Main.exe
```

`Main.exe` последовательно:
1) Запрашивает имя бинарного файла и количество записей;
2) Запускает **Creator.exe** в отдельной консоли и ждёт завершения;
3) Печатает содержимое бинарного файла в консоль;
4) Запрашивает имя файла отчёта и почасовую ставку;
5) Запускает **Reporter.exe** и после завершения печатает сформированный отчёт.


## Тестирование

Тесты используют относительные пути и запускают Creator.exe/Reporter.exe 
командой Creator.exe ..., поэтому тесты нужно запускать из папки, где лежат .exe, 
и там же должна быть папка tests/input_data.

1. Из корня проекта

```bat
cd build\Debug
```

2. Один раз копируем входные данные для тестов в `build\Debug\tests\input_data`

```bat
mkdir tests
mkdir tests\input_data
xcopy /E /I /Y ..\..\tests\input_data tests\input_data
```

3. Запуск тестов
```bat
.\main_test.exe
```

## Возможности

- **Создание двоичного файла** записей сотрудников (структура `employee`).
- **Генерация текстового отчёта** с табличным выводом и расчётом зарплаты.
- **Межпроцессное взаимодействие** через запуск дочерних процессов `Creator.exe` и `Reporter.exe` из `Main.exe` (WinAPI `CreateProcess`, ожидание `WaitForSingleObject`).
- **Автотесты** (GoogleTest) на корректные сценарии и обработку ошибок.

## Структура проекта

- `main.cpp` — управляющая программа: запуск Creator/Reporter, вывод бинарного файла и отчёта.
- `creator.cpp` — ввод записей и запись в бинарный файл.
- `reporter.cpp` — чтение бинарного файла и формирование отчёта.
- `Employee.h` — описание структуры `employee`.
- `tests/main_test.cpp` — GoogleTest тесты.
- `tests/input_data` - данные
- `CMakeLists.txt` — сборка трёх приложений + тестов.

